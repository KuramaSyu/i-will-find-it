syntax = "proto3";
import "google/protobuf/timestamp.proto";
import "google/protobuf/wrappers.proto";

package note;

// Request for getting a note by id
message GetNoteRequest {
    int32 id = 1;
}

// Response: represents a Note
message Note {
    int32 id = 1;
    string title = 2;
    string content = 3;
    google.protobuf.Timestamp updated_at = 4;
    int32 author_id = 5;
    repeated NoteEmbedding embeddings = 6;
    repeated NotePermission permissions = 7;
}

message NoteEmbedding {
    string model = 1;
    repeated float embedding = 2;
}

message NotePermission {
    int32 role_id = 1;
}

// Request to add/Update a note
message PostNoteRequest {
    optional google.protobuf.Int32Value id = 1;
    google.protobuf.StringValue title = 2;
    google.protobuf.StringValue content = 3;
    int32 author_id = 4;
}

// Note Service
service NoteService {
    rpc GetNote(GetNoteRequest) returns (Note);
    rpc PostNote(PostNoteRequest) returns (Note);
}